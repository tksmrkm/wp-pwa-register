(()=>{"use strict";var t=function(t){return function(n){var e="/";t.notification.data.url&&(e=t.notification.data.url),t.waitUntil(n.matchAll({type:"window"}).then((function(){return n.openWindow(e)})))}};var n="/wp-content/plugins/wp-pwa-register/offline.html";self.addEventListener("push",(function(t){var n,e,i,o=["/wp-json/wp/v2/pwa_notifications"],r="<?php  echo $title?>",a="<?php echo $icon ?>";try{var c=null===(n=t.data)||void 0===n?void 0:n.json();if(c.v2)return t.waitUntil(self.registration.showNotification(null!==(e=c.v2.headline)&&void 0!==e?e:r,{icon:null!==(i=c.v2.icon)&&void 0!==i?i:a,body:c.v2.title,data:{url:c.v2.link},vibrate:[200,100,200,100,200,100,200]}));c.data&&c.data.post_id?o.push(c.data.post_id):c.post_id&&o.push(c.post_id)}catch(t){console.warn(t)}t.waitUntil(fetch(o.join("/")).then((function(t){if(t.ok)return t.json();throw new Error("notifications api response error")})).then((function(t){var n=t.post_meta.headline?t.post_meta.headline:r,e={icon:t.post_meta.icon?t.post_meta.icon:a,body:t.title.rendered,data:{url:t.post_meta.link},vibrate:[200,100,200,100,200,100,200]};return self.registration.showNotification(n,e)})).catch(console.warn))})),self.addEventListener("notificationclick",(function(n){n.notification.close(),t(n)(clients)})),self.addEventListener("notificationclose",(function(n){t(n)(clients)})),self.addEventListener("install",(function(t){t.waitUntil(caches.open("1.3.11").then((function(t){t.add(n)})))})),self.addEventListener("fetch",(function(t){return e=void 0,i=void 0,r=function(){var e,i;return function(t,n){var e,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(c){return function(l){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;r&&(r=0,c[0]&&(a=0)),a;)try{if(e=1,i&&(o=2&c[0]?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,i=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(t,a)}catch(t){c=[6,t],i=0}finally{e=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}}(this,(function(o){switch(o.label){case 0:return"/"!==new URL(t.request.url).pathname?[3,4]:navigator.onLine?[3,2]:[4,caches.match(n)];case 1:return(e=o.sent())&&t.respondWith(e),[3,4];case 2:return[4,fetch(t.request).catch((function(){return caches.match(n)}))];case 3:(i=o.sent())&&t.respondWith(i),o.label=4;case 4:return[2]}}))},new((o=void 0)||(o=Promise))((function(t,n){function a(t){try{l(r.next(t))}catch(t){n(t)}}function c(t){try{l(r.throw(t))}catch(t){n(t)}}function l(n){var e;n.done?t(n.value):(e=n.value,e instanceof o?e:new o((function(t){t(e)}))).then(a,c)}l((r=r.apply(e,i||[])).next())}));var e,i,o,r}))})();